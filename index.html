<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Antenna Array Calculator - Large View</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
</head>
<body>

    <header>
        <h1>Antenna Array Radiation Pattern Calculator</h1>
        <p>Mô phỏng mảng anten tuyến tính - Chế độ xem lớn.</p>
    </header>

    <section id="inputs">
        <form id="arrayForm">
            <label>Số phần tử (N): <input type="number" id="N" value="8" min="1"></label>
            <label>Khoảng cách d (mét): <input type="number" id="d_meter" value="0.0625" step="any"></label>
            <label>Tần số (GHz): <input type="number" id="f" value="2.4" step="any"></label>
            <div style="margin: 10px 0; padding: 10px; border: 1px dashed #ccc; border-radius: 4px;">
                <span style="font-weight:bold; margin-right:10px;">Chế độ:</span>
                <button type="button" id="btnManual" style="padding: 5px 10px; background: #6c757d; font-size: 12px;">Manual</button>
                <button type="button" id="btnBroadside" style="padding: 5px 10px; background: #28a745; font-size: 12px;">Broadside (β=0)</button>
                <button type="button" id="btnEndfire" style="padding: 5px 10px; background: #dc3545; font-size: 12px;">Endfire (β=-kd)</button>
            </div>
            <label>Pha kích thích β (độ): <input type="number" id="beta_deg" value="0" step="1"></label>
            <button type="submit">Tính & Vẽ</button>
        </form>
        <div id="info"></div>
    </section>

    <div style="display: flex; flex-direction: column; align-items: center; gap: 30px; max-width: 1000px; margin: 0 auto;">
        
        <section style="width: 100%; height: 500px; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
            <h3 style="margin-top: 0;">Biểu đồ Cartesian (dB)</h3>
            <div style="width: 100%; height: 420px;">
                <canvas id="patternChart"></canvas>
            </div>
        </section>

        <section style="width: 100%; height: 650px; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
            <h3 style="margin-top: 0;">Biểu đồ Polar (Radiation Pattern)</h3>
            <div style="width: 100%; height: 570px;">
                <canvas id="polarChart"></canvas>
            </div>
        </section>

        <section style="width: 100%; height: 650px; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
            <h3 style="margin-top: 0;">Mô phỏng 3D Radiation Pattern (Tuyến tính)</h3>
            <div id="threeDChart" style="width: 100%; height: 570px;"></div>
        </section>
        
    </div>

    <section id="controls">
        <button id="clearBtn">Clear All</button>
    </section>

    <section id="metrics" style="display: flex; justify-content: space-around; background: #e8f5e9; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
        <div><strong>HPBW:</strong> <span id="hpbw-val">-</span>°</div>
        <div><strong>SLL:</strong> <span id="sll-val">-</span> dB</div>
        <div><strong>FNBW:</strong> <span id="fnbw-val">-</span>°</div>
        <div><strong>Directivity:</strong> <span id="dir-val">-</span> dBi</div>
    </section>

    <section id="table">
        <h3>Bảng giá trị đặc biệt (mỗi 10°)</h3>
        <div id="resultsTable"></div>
    </section>

    <script src="script.js"></script>
</body>
</html>