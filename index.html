<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Antenna Array Factor Calculator - Linear Array</title>
    
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>

    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0f2f5; margin: 0; padding: 20px; color: #333; }
        .container { max-width: 1200px; margin: auto; }
        .card { background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-bottom: 30px; }
        h1, h2, h3 { color: #333; }
        h2 { border-bottom: 2px solid #007bff; padding-bottom: 10px; margin-top: 0; }
        
        /* Form styling t∆∞∆°ng t·ª± Planar */
        .control-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; }
        .input-group { display: flex; flex-direction: column; }
        label { font-size: 0.9em; font-weight: bold; margin-bottom: 8px; color: #555; }
        input { padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; }
        
        /* Buttons */
        button { padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        #arrayForm button[type="submit"] { background-color: #007bff; color: white; width: 100%; margin-top: 20px; font-size: 16px; }
        #arrayForm button[type="submit"]:hover { background-color: #0056b3; }
        
        .mode-buttons { display: flex; gap: 10px; margin-top: 5px; flex-wrap: wrap; }
        .btn-mode { font-size: 12px; padding: 8px 12px; }
        
        /* Metrics Badge */
        .metric-badge { background: #e8f5e9; padding: 15px; border-radius: 8px; display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; text-align: center; border-left: 5px solid #28a745; }
        
        .info-panel { background: #f8f9fa; padding: 10px; border-radius: 5px; margin-top: 15px; font-family: monospace; border: 1px solid #eee; }
        .chart-section { margin-bottom: 30px; }
        
        header { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            color: white; padding: 40px; border-radius: 10px; margin-bottom: 30px; 
        }
        .nav-link { display: inline-block; background: #28a745; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; font-weight: bold; margin-top: 15px; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1 style="margin: 0;">Antenna Array Factor Calculator</h1>
        <p style="font-size: 1.1em; opacity: 0.9; max-width: 900px; margin: 15px 0;">
            C√¥ng c·ª• ph√¢n t√≠ch <strong>M·∫£ng Tuy·∫øn T√≠nh (Linear Array)</strong> chuy√™n s√¢u. 
            D·ª± ƒëo√°n H·ªá s·ªë m·∫£ng, ƒê·ªô ƒë·ªãnh h∆∞·ªõng v√† c√°c tham s·ªë b√∫p s√≥ng th·ªùi gian th·ª±c.
        </p>
        <div style="font-size: 0.9em; margin-bottom: 15px;">
            ‚ú® M·∫£ng tuy·∫øn t√≠nh ƒë·ªìng nh·∫•t (ULA) | ‚ú® Ch·∫ø ƒë·ªô Broadside & End-fire | ‚ú® Ph√¢n t√≠ch dB Scale
        </div>
        <a href="planar.html" class="nav-link">Chuy·ªÉn sang M·∫£ng Ph·∫≥ng (2D) ‚Üí</a>
    </header>

    <div class="card">
        <h2>Th√¥ng s·ªë c·∫•u h√¨nh m·∫£ng</h2>
        <form id="arrayForm">
            <div class="control-grid">
                <div class="input-group">
                    <label>S·ªë ph·∫ßn t·ª≠ (N):</label>
                    <input type="number" id="N" value="8" min="1">
                </div>
                <div class="input-group">
                    <label>Kho·∫£ng c√°ch d (m√©t):</label>
                    <input type="number" id="d_meter" value="0.0625" step="any">
                </div>
                <div class="input-group">
                    <label>T·∫ßn s·ªë (GHz):</label>
                    <input type="number" id="f" value="2.4" step="any">
                </div>
                <div class="input-group">
                    <label>Pha k√≠ch th√≠ch Œ≤ (ƒë·ªô):</label>
                    <input type="number" id="beta_deg" value="0" step="1">
                </div>
            </div>

            <div style="margin-top: 20px; padding: 15px; background: #fdfdfe; border: 1px dashed #ccc; border-radius: 8px;">
                <label style="display: block; margin-bottom: 10px; color: #444;">Thi·∫øt l·∫≠p nhanh ch·∫ø ƒë·ªô b·ª©c x·∫°:</label>
                <div class="mode-buttons">
                    <button type="button" id="btnManual" style="background: #6c757d; color: white;">Manual</button>
                    <button type="button" id="btnBroadside" style="background: #28a745; color: white;">Broadside (Œ≤=0)</button>
                    <button type="button" id="btnEndfire" style="background: #dc3545; color: white;">Endfire (Œ≤=-kd)</button>
                    <button type="button" id="btnPhased" style="background: #ffc107; color: #333;">Phased Array (L√°i b√∫p s√≥ng)</button>
                </div>
                <div style="margin-top: 15px; display: flex; align-items: center; gap: 10px;">
                    <label for="scan_angle" style="margin: 0; font-weight: normal;">G√≥c qu√©t mong mu·ªën Œ∏‚ÇÄ (ƒë·ªô):</label>
                    <input type="number" id="scan_angle" value="45" step="1" style="width: 80px; padding: 5px;">
                    <small style="color: #666;">(Ch·ªâ √°p d·ª•ng khi ch·ªçn ch·∫ø ƒë·ªô Phased Array)</small>
                </div>
            </div>

            <button type="submit">T√çNH TO√ÅN & C·∫¨P NH·∫¨T ƒê·ªí TH·ªä</button>
        </form>
        <div id="info" class="info-panel"></div>
    </div>

    <div class="card">
        <h3>K·∫øt qu·∫£ ƒë·∫∑c t√≠nh b·ª©c x·∫°</h3>
        <div id="metrics" class="metric-badge">
            <div><label>HPBW</label><div style="font-size: 1.5em; font-weight: bold;"><span id="hpbw-val">-</span>¬∞</div></div>
            <div><label>SLL (Max)</label><div style="font-size: 1.5em; font-weight: bold; color: #d63384;"><span id="sll-val">-</span> dB</div></div>
            <div><label>FNBW</label><div style="font-size: 1.5em; font-weight: bold;"><span id="fnbw-val">-</span>¬∞</div></div>
            <div><label>Directivity</label><div style="font-size: 1.5em; font-weight: bold; color: #007bff;"><span id="dir-val">-</span> dBi</div></div>
        </div>
    </div>

    <div style="display: grid; gap: 30px;">
        <section class="card chart-section">
            <h3 style="margin-top: 0; color: #d63384;">1. Array Factor Pattern (dB)</h3>
            <div style="width: 100%; height: 450px;">
                <canvas id="patternChart"></canvas>
            </div>
        </section>

        <section class="card chart-section">
            <h3 style="margin-top: 0; color: #6610f2;">2. Polar Plot of Radiation Pattern (dB)</h3>
            <div style="width: 100%; height: 550px;">
                <canvas id="polarChart"></canvas>
            </div>
        </section>

        <section class="card chart-section">
            <h3 style="margin-top: 0; color: #007bff;">3. 3D Radiation Pattern</h3>
            <div id="threeDChart" style="width: 100%; height: 550px;"></div>
        </section>
    </div>

    <div class="card">
        <h3>B·∫£ng gi√° tr·ªã ƒë·∫∑c bi·ªát (m·ªói 10¬∞)</h3>
        <div id="resultsTable" style="overflow-x: auto;"></div>
        <div style="text-align: right; margin-top: 20px;">
            <button id="clearBtn" style="background: #dc3545; color: white;">üóëÔ∏è Clear All Data</button>
        </div>
    </div>

    <div class="card" id="theory-section" style="line-height: 1.7;">
        <h2 style="text-align: center; color: #764ba2;">C∆° s·ªü l√Ω thuy·∫øt & C√¥ng th·ª©c</h2>
        <hr style="border: 0; border-top: 1px solid #eee; margin: 20px 0;">
        
        


    
        
        <h3>1. Gi·ªõi thi·ªáu</h3>
        <p>H·ªá th·ªëng m·∫£ng anten (Antenna Array) l√† s·ª± k·∫øt h·ª£p c·ªßa nhi·ªÅu ph·∫ßn t·ª≠ anten gi·ªëng nhau nh·∫±m ƒë·∫°t ƒë∆∞·ª£c ƒë·∫∑c t√≠nh b·ª©c x·∫° mong mu·ªën, nh∆∞ tƒÉng ƒë·ªô ƒë·ªãnh h∆∞·ªõng v√† kh·∫£ nƒÉng qu√©t b√∫p s√≥ng ƒëi·ªán t·ª≠ m√† kh√¥ng c·∫ßn di chuy·ªÉn v·∫≠t l√Ω anten.</p>

        <h3>2. H·ªá s·ªë m·∫£ng (Array Factor - AF)</h3>

<p>
ƒê·ªëi v·ªõi m·ªôt m·∫£ng tuy·∫øn t√≠nh ƒë·ªìng nh·∫•t (Uniform Linear Array - ULA) g·ªìm $N$ ph·∫ßn t·ª≠ gi·ªëng nhau,
ƒë·∫∑t d·ªçc theo tr·ª•c $z$ v·ªõi kho·∫£ng c√°ch gi·ªØa c√°c ph·∫ßn t·ª≠ l√† $d$, h·ªá s·ªë m·∫£ng (Array Factor)
ƒë∆∞·ª£c x√°c ƒë·ªãnh nh∆∞ sau:
</p>

<div style="text-align: center; background: #f0f0f0; padding: 15px; border-radius: 8px; margin: 10px 0;">
$$
AF =
\left|
\frac{\sin\left(\frac{N}{2}\psi\right)}
{N\sin\left(\frac{1}{2}\psi\right)}
\right|
$$
</div>

<p>Trong ƒë√≥:</p>
<ul>
    <li>$\psi = k d \cos(\theta) + \beta$ l√† ƒë·ªô l·ªách pha t·ªïng c·ªông gi·ªØa hai ph·∫ßn t·ª≠ k·∫ø ti·∫øp.</li>
    <li>$k = \dfrac{2\pi}{\lambda}$ l√† s·ªë s√≥ng.</li>
    <li>$d$ l√† kho·∫£ng c√°ch gi·ªØa c√°c ph·∫ßn t·ª≠.</li>
    <li>$\theta$ l√† g√≥c kh·∫£o s√°t t√≠nh t·ª´ tr·ª•c c·ªßa m·∫£ng.</li>
    <li>$\beta$ l√† pha k√≠ch th√≠ch ti·∫øn gi·ªØa c√°c ph·∫ßn t·ª≠.</li>
</ul>

<h4>2.1. Ch·ª©ng minh c√¥ng th·ª©c h·ªá s·ªë m·∫£ng</h4>

<p>
T·ªïng tr∆∞·ªùng (ho·∫∑c bi√™n ƒë·ªô s√≥ng) t·∫°i m·ªôt h∆∞·ªõng quan s√°t $\theta$ ƒë∆∞·ª£c t√≠nh b·∫±ng t·ªïng ƒë√≥ng g√≥p
c·ªßa t·∫•t c·∫£ c√°c ph·∫ßn t·ª≠ trong m·∫£ng:
</p>

<div style="text-align: center; background: #f0f0f0; padding: 15px; border-radius: 8px; margin: 10px 0;">
$$
AF = \left| \sum_{n=0}^{N-1} e^{j n \psi} \right|
$$
</div>

<p>
Bi·ªÉu th·ª©c tr√™n l√† m·ªôt chu·ªói h√¨nh h·ªçc h·ªØu h·∫°n v√† c√≥ th·ªÉ r√∫t g·ªçn v·ªÅ d·∫°ng kh√©p k√≠n:
</p>

<div style="text-align: center; background: #f0f0f0; padding: 15px; border-radius: 8px; margin: 10px 0;">
$$
\sum_{n=0}^{N-1} e^{j n \psi}
=
\frac{1 - e^{jN\psi}}{1 - e^{j\psi}}
$$
</div>

<p>
L·∫•y tr·ªã tuy·ªát ƒë·ªëi v√† bi·∫øn ƒë·ªïi ƒë·∫°i s·ªë, ta thu ƒë∆∞·ª£c c√¥ng th·ª©c h·ªá s·ªë m·∫£ng ƒë√£ n√™u ·ªü tr√™n.
</p>

<h4>2.2. ƒêi·ªÅu ki·ªán ƒë·∫°t c·ª±c ƒë·∫°i c·ªßa h·ªá s·ªë m·∫£ng</h4>

<p>
H·ªá s·ªë m·∫£ng ƒë·∫°t gi√° tr·ªã c·ª±c ƒë·∫°i khi c√°c s√≥ng ph√°t ra t·ª´ m·ªçi ph·∫ßn t·ª≠ trong m·∫£ng
c·ªông pha ho√†n to√†n t·∫°i h∆∞·ªõng quan s√°t. ƒêi·ªÅu ki·ªán n√†y x·∫£y ra khi:
</p>

<div style="text-align: center; background: #f0f0f0; padding: 15px; border-radius: 8px; margin: 10px 0;">
$$
\psi = 2m\pi \quad (m \in \mathbb{Z})
$$
</div>

<p>
C·ª±c ƒë·∫°i ch√≠nh (main lobe) t∆∞∆°ng ·ª©ng v·ªõi tr∆∞·ªùng h·ª£p $\psi = 0$, t·ª©c l√†:
</p>

<div style="text-align: center; background: #f0f0f0; padding: 15px; border-radius: 8px; margin: 10px 0;">
$$
k d \cos(\theta) + \beta = 0
$$
</div>

<p>
Khi ƒë√≥, h·ªá s·ªë m·∫£ng ƒë·∫°t gi√° tr·ªã l·ªõn nh·∫•t. Do h·ªá s·ªë m·∫£ng ƒë√£ ƒë∆∞·ª£c chu·∫©n h√≥a theo gi√° tr·ªã c·ª±c ƒë·∫°i,
gi√° tr·ªã ƒë·ªânh c·ªßa AF b·∫±ng 1, t∆∞∆°ng ƒë∆∞∆°ng v·ªõi 0 dB trong thang logarith.
</p>

<h4>2.3. √ù nghƒ©a v·∫≠t l√Ω</h4>

<p>
ƒêi·ªÅu ki·ªán c·ª±c ƒë·∫°i c·ªßa h·ªá s·ªë m·∫£ng ph·∫£n √°nh hi·ªán t∆∞·ª£ng giao thoa tƒÉng c∆∞·ªùng, khi
ƒë·ªô l·ªách pha h√¨nh h·ªçc gi·ªØa c√°c ph·∫ßn t·ª≠ ƒë∆∞·ª£c b√π ch√≠nh x√°c b·ªüi pha k√≠ch th√≠ch.
Ng∆∞·ª£c l·∫°i, khi ƒëi·ªÅu ki·ªán c·ªông pha kh√¥ng ƒë∆∞·ª£c th·ªèa m√£n, hi·ªán t∆∞·ª£ng giao thoa
tri·ªát ti√™u x·∫£y ra, t·∫°o n√™n c√°c ƒëi·ªÉm null v√† c√°c side lobe trong gi·∫£n ƒë·ªì b·ª©c x·∫°.
</p>

        
        

        <h3>3. C√°c ch·∫ø ƒë·ªô b·ª©c x·∫° ƒë·∫∑c bi·ªát</h3>

<p>
T√πy theo gi√° tr·ªã c·ªßa pha k√≠ch th√≠ch ti·∫øn $\beta$, m·∫£ng anten tuy·∫øn t√≠nh ƒë·ªìng nh·∫•t (ULA)
c√≥ th·ªÉ t·∫°o ra c√°c ch·∫ø ƒë·ªô b·ª©c x·∫° kh√°c nhau. C√°c ch·∫ø ƒë·ªô n√†y ƒë∆∞·ª£c x√°c ƒë·ªãnh t·ª´ ƒëi·ªÅu ki·ªán
c·ª±c ƒë·∫°i c·ªßa h·ªá s·ªë m·∫£ng:
</p>

<div style="text-align: center; background: #f0f0f0; padding: 15px; border-radius: 8px; margin: 10px 0;">
$$
\psi = k d \cos(\theta) + \beta = 0
$$
</div>

<p>
Hai ch·∫ø ƒë·ªô b·ª©c x·∫° ƒë·∫∑c bi·ªát v√† quan tr·ªçng nh·∫•t l√† ch·∫ø ƒë·ªô broadside v√† end-fire.
</p>

<h4>3.1. Ch·∫ø ƒë·ªô Broadside ($\beta = 0$)</h4>

<p>
Trong ch·∫ø ƒë·ªô broadside, c√°c ph·∫ßn t·ª≠ c·ªßa m·∫£ng ƒë∆∞·ª£c k√≠ch th√≠ch c√πng pha, t·ª©c l√†
$\beta = 0$. ƒêi·ªÅu ki·ªán c·ª±c ƒë·∫°i c·ªßa h·ªá s·ªë m·∫£ng tr·ªü th√†nh:
</p>

<div style="text-align: center; background: #f0f0f0; padding: 15px; border-radius: 8px; margin: 10px 0;">
$$
k d \cos(\theta) = 0
$$
</div>

<p>
T·ª´ ƒë√≥ suy ra:
</p>

<div style="text-align: center; background: #f0f0f0; padding: 15px; border-radius: 8px; margin: 10px 0;">
$$
\cos(\theta) = 0 \Rightarrow \theta = 90^\circ
$$
</div>

<p>
Nh∆∞ v·∫≠y, b√∫p s√≥ng ch√≠nh c·ªßa m·∫£ng anten n·∫±m vu√¥ng g√≥c v·ªõi tr·ª•c m·∫£ng. Ch·∫ø ƒë·ªô broadside
th∆∞·ªùng ƒë∆∞·ª£c s·ª≠ d·ª•ng khi y√™u c·∫ßu b·ª©c x·∫° ƒë·ªëi x·ª©ng v√† ƒë·∫°t ƒë·ªô l·ª£i l·ªõn theo ph∆∞∆°ng vu√¥ng g√≥c
v·ªõi m·∫£ng.
</p>

<h4>3.2. Ch·∫ø ƒë·ªô End-fire ($\beta = -kd$)</h4>

<p>
Trong ch·∫ø ƒë·ªô end-fire, pha k√≠ch th√≠ch ti·∫øn ƒë∆∞·ª£c l·ª±a ch·ªçn sao cho:
</p>

<div style="text-align: center; background: #f0f0f0; padding: 15px; border-radius: 8px; margin: 10px 0;">
$$
\beta = -k d
$$
</div>

<p>
Khi ƒë√≥, ƒëi·ªÅu ki·ªán c·ª±c ƒë·∫°i c·ªßa h·ªá s·ªë m·∫£ng tr·ªü th√†nh:
</p>

<div style="text-align: center; background: #f0f0f0; padding: 15px; border-radius: 8px; margin: 10px 0;">
$$
k d \cos(\theta) - k d = 0
$$
</div>

<p>
Suy ra:
</p>

<div style="text-align: center; background: #f0f0f0; padding: 15px; border-radius: 8px; margin: 10px 0;">
$$
\cos(\theta) = 1 \Rightarrow \theta = 0^\circ
$$
</div>

<p>
Do t√≠nh ƒë·ªëi x·ª©ng c·ªßa m·∫£ng, m·ªôt b√∫p s√≥ng ph·ª• c√≥ th·ªÉ xu·∫•t hi·ªán t·∫°i $\theta = 180^\circ$.
Trong ch·∫ø ƒë·ªô end-fire, b√∫p s√≥ng ch√≠nh c·ªßa m·∫£ng anten n·∫±m d·ªçc theo tr·ª•c m·∫£ng, v√† th∆∞·ªùng
ƒë∆∞·ª£c s·ª≠ d·ª•ng trong c√°c ·ª©ng d·ª•ng c·∫ßn b·ª©c x·∫° theo ph∆∞∆°ng d·ªçc tr·ª•c.
</p>

<h4>3.3. Nh·∫≠n x√©t</h4>

<ul>
    <li>Ch·∫ø ƒë·ªô broadside cho b·ª©c x·∫° vu√¥ng g√≥c v·ªõi tr·ª•c m·∫£ng v√† c√≥ d·∫°ng gi·∫£n ƒë·ªì ƒë·ªëi x·ª©ng.</li>
    <li>Ch·∫ø ƒë·ªô end-fire cho b·ª©c x·∫° d·ªçc theo tr·ª•c m·∫£ng v√† y√™u c·∫ßu ƒëi·ªÅu ch·ªânh pha k√≠ch th√≠ch.</li>
    <li>B·∫±ng c√°ch thay ƒë·ªïi pha $\beta$, c√≥ th·ªÉ ƒëi·ªÅu khi·ªÉn h∆∞·ªõng b√∫p s√≥ng ch√≠nh c·ªßa m·∫£ng anten (beam steering).</li>
</ul>


        <h3>4. T√†i li·ªáu tham kh·∫£o</h3>
        <ul style="list-style-type: decimal;">
            <li>Constantine A. Balanis, <em>Antenna Theory: Analysis and Design</em>, 4th Edition, Wiley.</li>
            <li>Robert J. Mailloux, <em>Phased Array Antenna Handbook</em>, Artech House.</li>
        </ul>
    </section>

    <script src="script.js"></script>
</body>
</html>